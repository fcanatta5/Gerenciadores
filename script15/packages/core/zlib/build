#!/usr/bin/env bash
# core/zlib 1.3.1 - build script para adm

NAME="zlib"
CATEGORY="core"
VERSION="1.3.1"

URL="https://zlib.net/zlib-1.3.1.tar.gz"
SHA256="9a93b2b7dfdac77ceba5a558a580e74667dd6fede4585b91eefb60f03b72df23"

DEPENDS=""
BUILD_DEPENDS=""

PREFIX="/usr"
BUILD_SYSTEM="make"

pkg_configure() {
  # zlib usa configure próprio (não autotools)
  ./configure --prefix="$PREFIX"
}

pkg_build() {
  make -j"${JOBS:-1}"
}

pkg_install() {
  make DESTDIR="$DESTDIR" install

  # Evita .la (normalmente desnecessário e pode causar ruído/colisão)
  find "$DESTDIR" -name '*.la' -delete 2>/dev/null || true
}

pkg_post() {
  :
}
