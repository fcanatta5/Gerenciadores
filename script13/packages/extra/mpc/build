pkgname="mpc"
pkgver="1.3.1"
pkgrel=1
category="extra"
pkgdesc="GNU MPC: complex numbers arithmetic with correct rounding"
url="https://www.multiprecision.org/mpc/"
license="LGPL-2.1-or-later"
arch="x86_64"

depends=( "gmp" "mpfr" )

sources=(
  "https://ftp.gnu.org/gnu/mpc/mpc-${pkgver}.tar.gz::mpc-${pkgver}.tar.gz"
)
sha256sums=(
  "ab642492f5cf882b74aa0cb730cd410a81edcdbec895183ce930e706c1c759b8 mpc-1.3.1.tar.gz"
)

pre_build() {
  : "${CC:=cc}"
  : "${CFLAGS:=-O2 -pipe}"
}

build() {
  rm -rf _build
  mkdir -p _build
  cd _build

  ../configure \
    --prefix=/usr \
    --with-gmp=/usr \
    --with-mpfr=/usr

  make -j"$(getconf _NPROCESSORS_ONLN 2>/dev/null || echo 4)"
}

install() {
  cd _build
  make DESTDIR="$DESTDIR" install
}
